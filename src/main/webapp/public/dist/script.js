"use strict";angular.module("NanoApp",["controllers","services","ui.router","ngAnimate","userController"]).run(function(){}).config(function(e,t,n,r){n.html5Mode({enabled:!0,requireBase:!1}),t.state("index",{url:"/",views:{menu:{templateUrl:"/public/templates/menu.html",controller:"MenuController"},content:{templateUrl:"/public/templates/galery.html",controller:"GaleryController"}}}).state("configGen",{url:"/config",views:{menu:{templateUrl:"/public/templates/menuConfig.html",controller:"MenuConfigController"},content:{templateUrl:"/public/templates/configGen.html",controller:"ConfigGenController"}}}).state("configUpdatingTime ",{url:"/config-time",views:{menu:{templateUrl:"/public/templates/menuConfig.html",controller:"MenuConfigController"},content:{templateUrl:"/public/templates/configUpdatingTime.html",controller:"ConfigUpdatingTimeController"}}}).state("genInfo",{url:"/search/:id",views:{menu:{templateUrl:"/public/templates/menu.html",controller:"MenuController"},content:{templateUrl:"/public/templates/searchDetail.html",controller:"SearchDetailController"}}}).state("results",{url:"/search/results/:id?status",views:{menu:{templateUrl:"/public/templates/menu.html",controller:"MenuController"},content:{templateUrl:"/public/templates/results.html",controller:"ResultsController"}}}).state("report",{url:"/search/report/:id",views:{menu:{templateUrl:"/public/templates/menu.html",controller:"MenuController"},content:{templateUrl:"/public/templates/report.html",controller:"ReportController"}}}),e.otherwise("/")});var genes=eng.getDataSource("");angular.module("controllers",["controller.menu","controller.galery","controller.searchDetail","controller.results","controller.report","controller.menuConfig","controller.configGen","controller.configUpdatingTime"]),angular.module("controller.configGen",[]).controller("ConfigGenController",function(e,t,n,r,a,o){e.geneSelected=!1,e.geneList=[],e.geneId,e.altList=[],e.cancerList=[];var s,i,c="The gene has been added correctly.",l="The molecular alteration has been added correctly",u="The molecular alteration has been correctly updated",d="The disease and its information has been added correctly",g="The disease information has been correctly updated",f="The existence of this gene is being validated, please wait.";e.addingGen=!1,e.addingAlt=!1,e.addingDisease=!1,e.editingAlt=!1,e.editingDisease=!1,e.cancelGen=function(){e.addingGen=!1,e.geneForm.$setPristine(),e.geneSymbol=""},e.addAlt=function(){e.cancelAlt(),e.addingAlt=!0},e.cancelAlt=function(){e.addingAlt=!1,e.editingAlt=!1,e.alterationName="",e.aliase="",e.altForm.$setPristine()},e.editAlt=function(t){e.editingAlt=!0,e.addingAlt=!1,e.alterationName=t.name,e.aliase=t.aliases,e.altList.forEach(function(e,n){e._id==t._id&&(s=n)})},e.addDis=function(){e.cancerDis(),e.addingDisease=!0},e.cancerDis=function(){e.addingDisease=!1,e.editingDisease=!1,e.dideaseName="",e.diseaseSummary="",e.diseaseForm.$setPristine()},e.editDisease=function(t){e.editingDisease=!0,e.addingDisease=!1,e.dideaseName=t.name,e.diseaseSummary=t.summary,e.cancerList.forEach(function(e,n){e._id==t._id&&(i=n)})},e.addGene=function(t){var r={symbol:t};showMessage("msg",f),n.validate(r).then(function(){n.save(r).then(function(t){removeMessage("msg"),e.geneList.push(t),e.cancelGen(),showMessage("ok",c)},function(e){removeMessage("msg"),showMessage("error",e),console.log(e)})},function(t){removeMessage("msg"),console.log(t),showMessage("error",t.symbol),e.cancelGen()})},e.addAlteration=function(t,n){var a={gene:e.geneId,name:t,aliases:n};r.validate(a).then(function(){r.save({gene:e.geneId,name:t,aliases:n}).then(function(t){e.altList.push(t),showMessage("ok",l),e.cancelAlt()},function(e){console.log(e)})},function(t){console.log(t),showMessage("error",t.name),e.cancelAlt()})},e.updateAlteration=function(t,n){e.altList[s].name=t,e.altList[s].aliases=n,r.update(e.altList[s]).then(function(t){e.cancelAlt(),showMessage("ok",u)},function(e){console.log(e)})},e.addDisease=function(t,n){a.validate().then(function(){a.save({name:t,summary:n}).then(function(t){o.save({gene:e.geneId,cancer:t._id}).then(function(n){e.cancerList.push(t),showMessage("ok",d),e.cancerDis()})})},function(e){})},e.updateDisease=function(t,n){e.cancerList[i].name=t,e.cancerList[i].summary=n,a.update(e.cancerList[i]).then(function(t){e.cancerDis(),showMessage("ok",g)})},e.setGenId=function(t){e.cancelAlt(),e.cancerDis(),e.cancelGen(),e.geneSelected=!0,e.geneId=t,r.list(e.geneId).then(function(t){e.altList=t},function(e){console.log(e)}),a.listByGenId(e.geneId).then(function(t){e.cancerList=t},function(e){console.log(e)})},n.list().then(function(t){e.geneList=t}),$("#menu-toggle").click(function(e){$("#menu-toggle").removeClass("menu-toggle-off-fixed"),e.preventDefault(),$("#wrapper").toggleClass("toggled"),$(this).toggleClass("menu-toggle-off")}),checkRezise()}),angular.module("controller.configUpdatingTime",["angular-carousel"]).controller("ConfigUpdatingTimeController",function(e,t){e.rates=t.rateUpdate(),console.log(e.rates);var n="Configuration settings have been updated correctly";t.getRateUpdate().then(function(t){console.log(t),e.optionValue=t},function(n){t.saveRateUpdate({rateUpdPubl:{day:e.rates[0].day,text:e.rates[0].text}}).then(function(t){console.log(t),e.optionValue=t})}),e.saveConfig=function(r){e.optionValue.rateUpdPubl=r,t.updateRateUpdate(e.optionValue).then(function(t){showMessage("ok",n),e.optionValue=t},function(e){console.log(e)})},$("#menu-toggle").click(function(e){$("#menu-toggle").removeClass("menu-toggle-off-fixed"),e.preventDefault(),$("#wrapper").toggleClass("toggled"),$(this).toggleClass("menu-toggle-off")}),checkRezise()}),angular.module("controller.galery",["angular-carousel"]).controller("GaleryController",function(e,t){$("#c").carousel({interval:3e3}),e.galleryImages=[],t.list().then(function(t){e.galleryImages=t},function(e){console.log(e)}),$("#menu-toggle").click(function(e){$("#menu-toggle").removeClass("menu-toggle-off-fixed"),e.preventDefault(),$("#wrapper").toggleClass("toggled"),$(this).toggleClass("menu-toggle-off")}),checkRezise()}),angular.module("controller.menuConfig",[]).controller("MenuConfigController",function(e,t){}),angular.module("controller.menu",[]).controller("MenuController",function(e,t,n,r,a,o,s,i,c){e.searchList=[],e.searchId=r.id,e.geneList,e.altList,e.datesList=i.publicationDates();var l="Aurora is searching information about this schema of search. This process may take several minutes, please wait.",u="The search schema has been added correctly";e.schemeSelected=function(t){e.searchId=t},e.searchListFunction=function(t){var n=e.filterPattern||"";return t.filter(function(e){return n.split(",").every(function(t){var n=e.geneSymbol+" ; "+e.alteName;return new RegExp(t.toLowerCase().trim()).test(n.toLowerCase())})})},n.$on("articleRead",function(t,n){e.searchList.forEach(function(t,r){t._id===n&&(e.searchList[r].notification--,a.update(e.searchList[r]))})}),n.$on("articleRecommended",function(t,n,r){e.searchList.forEach(function(t,o){t._id===n&&(e.searchList[o].recommended+=r,a.update(e.searchList[o]))})}),a.list().then(function(t){t.forEach(function(t,n){e.searchList.push(t),c.listbyStatusSearchId(t._id).then(function(t){e.searchList[n].noArts=t.length}),o.byId(t.gene).then(function(t){e.searchList[n].geneSymbol=t.symbol}),s.byId(t.altMolecular).then(function(t){e.searchList[n].alteName=t.name})})},function(e){}),o.list().then(function(t){e.geneList=t}),e.geneChange=function(t){s.list(t._id).then(function(t){e.altList=t})},e.addSearch=function(t,n,r){var i={gene:t._id,altMolecular:n._id,artYearsOld:r.year};showMessage("msg",l),a.validate(i).then(function(){a.add(i).then(function(t){removeMessage("msg"),showMessage("ok",u),$("#panel-element-busca").collapse("hide"),e.schemeForm.$setPristine();var n=e.searchList.push(t.data);o.byId(t.data.gene).then(function(t){e.searchList[n-1].geneSymbol=t.symbol}),s.byId(t.data.altMolecular).then(function(t){e.searchList[n-1].alteName=t.name}),e.newSearch=!1},function(t){removeMessage("msg"),showMessage("error",t),$("#panel-element-busca").collapse("hide"),e.schemeForm.$setPristine(),e.geneSelected=null,e.altSelected=null,e.dateSelected=null})},function(e){removeMessage("msg"),showMessage("error",e.gene)})}}),angular.module("controller.report",["angular-carousel"]).controller("ReportController",function(e,t,n,r,a,o,s,i,c,l){function u(t,n,r,a,s){e.maxPage&&(e.maxPage=Math.ceil(e.totalRows/e.limit),e.maxPage<e.pag&&(a=e.pag=e.maxPage)),o.listBySearchId(t,n,r,a,s).then(function(t){e.totalRows=t.totalRows,e.limit=t.limit,e.maxPage=Math.ceil(e.totalRows/e.limit),t.data.forEach(function(t){e.articleList.push({article:t,artSearch:t.artSearch})})})}e.searchId=r.id,e.status=2,e.report={},e.articleList=[],e.gene,e.alt,e.orderBy="-ranking";var d="The report document has been saved correctly",g="The report document has been updated correctly",f="A report without interpretation or without reference documents can not being printed, please provide an interpretation and check if there are documents in accepted documents folder.";e.print=function(){e.report.hasOwnProperty("comment")&&0!=e.articleList.length?window.print():showMessage("error",f)},i.byId(e.searchId).then(function(t){c.byId(t.gene).then(function(t){e.gene=t}),l.byId(t.alt).then(function(t){e.alt=t})},function(e){console.log(e)}),e.save=function(n){console.log(n),n.comment=n.comment.replace(new RegExp("\n","g"),"<br>"),e.report.hasOwnProperty("_id")?s.update(n).then(function(){e.report.comment=t("formatReport")(e.report.comment),showMessage("ok",g)}):(n.search=e.searchId,s.save(n).then(function(){e.report.comment=t("formatReport")(e.report.comment),showMessage("ok",d)}))},s.bySearchId(e.searchId).then(function(n){e.report=n,e.report.comment=t("formatReport")(e.report.comment)},function(e){console.log(e)}),u(e.searchId,e.status,e.orderBy),$("#menu-toggle").click(function(e){$("#menu-toggle").removeClass("menu-toggle-off-fixed"),e.preventDefault(),$("#wrapper").toggleClass("toggled"),$(this).toggleClass("menu-toggle-off")}),checkRezise()}),angular.module("controller.results",[]).controller("ResultsController",function(e,t,n,r,a,o,s){e.searchId=n.id;var i=parseInt(n.status);n.status>=0&&n.status<=4?e.status=i:e.status=4,e.statuslist=["Unclassified documents","New documents","Accepted documents","Rejected documents","Recommended documents"],e.pag=1,e.maxPage,e.totalRows,e.totalRowsFinal,e.sortBy="-ranking",e.limit,e.gene,e.reorderClass="glyphicon-sort-by-attributes",e.isReorderToggle=!1,e.articleList=[],e.filterSelected="ranking",o.byId(e.searchId).then(function(t){s.byId(t.gene).then(function(t){e.gene=t})},function(e){console.log(e)}),e.prev=function(){1!==e.status&&e.pag>1&&e.pag--,e.articleList=[],e.updateResults(e.searchId,e.status,e.sortBy,1!=e.status?e.pag:1)},e.firts=function(){e.pag=1,e.articleList=[],e.updateResults(e.searchId,e.status,e.sortBy,1!=e.status?e.pag:1)},e.last=function(){e.pag=e.maxPage,e.articleList=[],e.updateResults(e.searchId,e.status,e.sortBy,1!=e.status?e.pag:1)},e.next=function(){1!==e.status&&e.pag<e.maxPage&&e.pag++,e.articleList=[],e.updateResults(e.searchId,e.status,e.sortBy,1!=e.status?e.pag:1)},e.discard=function(n,a,o){var s=n.status;n.status=3,r.update(n).then(function(){$("#p"+a).on("hidden.bs.collapse",function(){$("#p"+a).off("hidden.bs.collapse"),e.articleList.splice(o,1),e.$digest()}),$("#p"+a).collapse("hide"),e.maxPage=Math.ceil(--e.totalRows/e.limit),e.totalRowsFinal--,n.ranking>5&&t.$emit("articleRecommended",e.searchId,-1),1==s?e.updateResults(e.searchId,e.status,e.sortBy,-1):e.maxPage<e.pag?(e.pag=e.maxPage,e.updateResults(e.searchId,e.status,e.sortBy,e.pag)):e.updateResults(e.searchId,e.status,e.sortBy,e.pag,1)})},e.accept=function(n,a,o){console.log(a);var s=n.status;n.status=2,r.update(n).then(function(){$("#p"+a).on("hidden.bs.collapse",function(){$("#p"+a).off("hidden.bs.collapse"),e.articleList.splice(o,1),e.$digest()}),$("#p"+a).collapse("hide"),e.maxPage=Math.ceil(--e.totalRows/e.limit),e.totalRowsFinal--,n.ranking>5&&t.$emit("articleRecommended",e.searchId,-1),1==s?e.updateResults(e.searchId,e.status,e.sortBy,-1):e.maxPage<e.pag?(e.pag=e.maxPage,e.updateResults(e.searchId,e.status,e.sortBy,e.pag)):e.updateResults(e.searchId,e.status,e.sortBy,e.pag,1)})},e.statusChange=function(t){e.articleList=[],e.pag=1,e.status=parseInt(t),e.updateResults(e.searchId,e.status,e.sortBy,e.pag)},e.filterToogle=function(t,n){console.log(n),console.log(t),t?(e.isReorderToggle=!1,e.reorderClass="glyphicon-sort-by-attributes-alt"):(e.isReorderToggle=!0,e.reorderClass="glyphicon-sort-by-attributes"),e.isReorderToggle&&(n="-"+n),e.articleList=[],e.pag=1,e.sortBy=n,e.updateResults(e.searchId,e.status,e.sortBy,e.pag)},e.filterChange=function(){"titleSort"==e.filterSelected||"autorSort"==e.filterSelected?e.filterToogle(!0,e.filterSelected):e.filterToogle(!1,e.filterSelected)},e.updateResults=function(n,o,s,i,c){e.maxPage&&(e.maxPage=Math.ceil(e.totalRows/e.limit),e.maxPage<e.pag&&(i=e.pag=e.maxPage)),a.listBySearchId(n,o,s,i,c).then(function(n){e.totalRowsFinal=e.totalRows=n.totalRows,e.limit=n.limit,e.maxPage=Math.ceil(e.totalRows/e.limit),n.data.forEach(function(n){1==n.artSearch.status&&(n.artSearch.ranking>5?n.artSearch.status=4:n.artSearch.status=0,t.$emit("articleRead",e.searchId),e.totalRows--,r.update(n.artSearch),n.artSearch.status=1),e.articleList.push({article:n,artSearch:n.artSearch})})},function(e){})},e.updateResults(e.searchId,e.status,e.sortBy,e.pag),$("#menu-toggle").click(function(e){$("#menu-toggle").removeClass("menu-toggle-off-fixed"),e.preventDefault(),$("#wrapper").toggleClass("toggled"),$(this).toggleClass("menu-toggle-off")}),checkRezise()}),angular.module("controller.searchDetail",[]).controller("SearchDetailController",function(e,t,n,r,a){e.gene,e.searchId=t.id,e.cancerList,e.position=0,n.byId(e.searchId).then(function(t){r.byId(t.gene).then(function(t){e.gene=t,a.listByGenId(e.gene._id).then(function(t){e.cancerList=t},function(e){console.log(e)})})},function(e){console.log(e)}),e.prev=function(){e.position--},e.next=function(){e.position++},$("#menu-toggle").click(function(e){$("#menu-toggle").removeClass("menu-toggle-off-fixed"),e.preventDefault(),$("#wrapper").toggleClass("toggled"),$(this).toggleClass("menu-toggle-off")}),checkRezise()}),angular.module("service.alteration",[]).service("Alteration",function(e,t){this.validate=function(e){var n=t.defer(),r=eng.getDataSource("AlterationMolecular");return r.validateObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject(e.errors)}),n.promise},this.byId=function(e){var n=t.defer(),r=eng.getDataSource("AlterationMolecular");return r.fetchObjById(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise},this.list=function(e){var n=t.defer(),r=eng.getDataSource("AlterationMolecular"),a={};return e&&(a.gene=e),r.fetchObj(a,function(e){0==e.status?n.resolve(e.data):n.reject("Server error")}),n.promise},this.save=function(e){var n=t.defer(),r=eng.getDataSource("AlterationMolecular");return r.addObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject("No data")}),n.promise},this.update=function(e){var n=t.defer(),r=eng.getDataSource("AlterationMolecular");return r.updateObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject("No data")}),n.promise}}),angular.module("services",["service.search","service.gene","service.alteration","service.cancerType","service.gene-cancer","service.art-search","service.art-search","service.article","service.report","service.config","service.images","service.user","service.role"]).filter("sanitize",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]).filter("formatPrint",[function(){return function(e){return e?e.replace(new RegExp("\n","g"),"<br>"):""}}]).filter("formatReport",[function(){return function(e){return e?e.replace(new RegExp("<br>","g"),"\n"):""}}]),angular.module("service.art-search",[]).service("Art_Search",function(e,t){this.list=function(e,n,r){var a=t.defer(),o=eng.getDataSource("Art_Search"),s={};return s.data={},null!=e&&(s.data.search=e),null!=n&&(4==parseInt(n)?(s.data.ranking={$gt:5},s.data.status={$in:[1,4]}):0==parseInt(n)?s.data.status={$in:[0,4]}:s.data.status=n),null!=r&&(s.sortBy=[r]),o.fetch(s,function(e){e?a.resolve(e.data.map(function(e){return e.article})):a.reject("No data")}),a.promise},this.listbyStatusSearchId=function(e){var n=t.defer(),r=eng.getDataSource("Art_Search");return r.fetchObj({search:e},function(e){e?n.resolve(e.data):n.reject("No data")}),n.promise},this.bySearchArticleId=function(e,n){var r=t.defer(),a=eng.getDataSource("Art_Search");return a.fetchObj({search:e,article:n},function(e){e?r.resolve(e.data[0]):r.reject("No data")}),r.promise},this.update=function(e){var n=t.defer(),r=eng.getDataSource("Art_Search");return r.updateObj(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise}}),angular.module("service.article",[]).service("Article",function(e,t,n){var r=5;this.byId=function(e){var n=t.defer(),r=eng.getDataSource("Article");return r.fetchObjById(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise},this.list=function(e,n,a,o){var s=t.defer(),i=eng.getDataSource("Article"),c={};return c.data={},null!=e&&(c.data._id=e),null!=n&&(c.sortBy=[n]),null!=a&&(-1==a?(c.startRow=0,c.endRow=1):(c.endRow=a*r,null!=o?c.startRow=(a-1)*r+r-o:c.startRow=(a-1)*r)),i.fetch(c,function(e){e?s.resolve(e):s.reject("No data")}),s.promise},this.listBySearchId=function(e,a,o,s,i){var c=t.defer(),l=null,u=this;return null!=o&&("ranking"==o||"-ranking"==o)&&(l=o,o=null),n.list(e,a,l).then(function(t){var a=t.length;if(null==o&&null!=s){if(-1==s)t=t.slice(0,1);else{var l=s*r;t=null!=i?t.slice((s-1)*r+r-i,l):t.slice((s-1)*r,l)}s=null}u.list(t,o,s,i).then(function(s){if(s&&s.data.length>0){null==o&&(s.data=s.data.sort(function(e,n){return t.findIndex(function(t){return t===e._id})-t.findIndex(function(e){return e===n._id})})),s.totalRows=a,s.limit=r;var i=0;s.data.forEach(function(t,r){n.bySearchArticleId(e,t._id).then(function(e){i++,s.data[r].artSearch=e,s.data.length===i&&c.resolve(s)})})}else c.reject("No data")},function(e){c.reject(e)})},function(e){c.reject(e)}),c.promise},this.update=function(e){var n=t.defer(),r=eng.getDataSource("Article");return r.updateObj(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise}}),angular.module("service.cancerType",[]).service("CancerType",function(e,t,n){this.validate=function(e){var n=t.defer(),r=eng.getDataSource("CancerType");return r.validateObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject(e.errors)}),n.promise},this.byId=function(e){var n=t.defer(),r=eng.getDataSource("CancerType");return r.fetchObjById(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise},this.listByGenId=function(e){var r=this,a=t.defer(),o=[];return n.listbyGeneId(e).then(function(e){e&&0==e.status&&(e.data.forEach(function(t){r.byId(t.cancer).then(function(t){o.push(t),e.data.length==o.length&&a.resolve(o)})}),0==e.data.length&&a.resolve(o))},function(e){a.reject(e)}),a.promise},this.list=function(){var e=t.defer(),n=eng.getDataSource("CancerType");return n.fetch({},function(t){t&&0==t.status?e.resolve(t.data):e.reject("Server error")}),e.promise},this.save=function(e){var n=t.defer(),r=eng.getDataSource("CancerType");return r.addObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject("No data")}),n.promise},this.update=function(e){var n=t.defer(),r=eng.getDataSource("CancerType");return r.updateObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject("No data")}),n.promise}}),angular.module("service.config",[]).service("Config",function(e,t){this.publicationDates=function(){return[{year:1,text:"1 year"},{year:3,text:"3 Years"},{year:5,text:"5 Years"},{year:10,text:"10 Years"}]},this.rateUpdate=function(){return[{day:1,text:"Daily"},{day:7,text:"Every week"},{day:15,text:"Every other week"},{day:30,text:"Every month"}]},this.getRateUpdate=function(){var e=t.defer(),n=eng.getDataSource("Configuration");return n.fetchObj({},function(t){t&&t.data.length>0?e.resolve(t.data[0]):e.reject("No data")}),e.promise},this.saveRateUpdate=function(e){var n=t.defer(),r=eng.getDataSource("Configuration");return r.addObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject("No data")}),n.promise},this.updateRateUpdate=function(e){var n=t.defer(),r=eng.getDataSource("Configuration");return r.updateObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject("No data")}),n.promise}}),angular.module("service.gene-cancer",[]).service("Gene_Cancer",function(e,t){this.listbyGeneId=function(e){var n=t.defer(),r=eng.getDataSource("Gene_Cancer");return r.fetchObj({gene:e},function(e){e?n.resolve(e):n.reject("No data")}),n.promise},this.save=function(e){var n=t.defer(),r=eng.getDataSource("Gene_Cancer");return r.addObj(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise}}),angular.module("service.gene",[]).service("Gene",function(e,t){this.validate=function(e){var n=t.defer(),r=eng.getDataSource("Gene");return r.validateObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject(e.errors)}),n.promise},this.byId=function(e){var n=t.defer(),r=eng.getDataSource("Gene");return r.fetchObjById(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise},this.list=function(){var e=t.defer(),n=eng.getDataSource("Gene");return n.fetch({},function(t){0==t.status?e.resolve(t.data):e.reject("Server error")}),e.promise},this.save=function(e){var n=t.defer(),r=eng.getDataSource("Gene");return r.addObj(e,function(e){e&&0==e.status?n.resolve(e.data):-2==e.status?n.reject(e.msgError):n.reject("No data")}),n.promise}}),angular.module("service.images",[]).service("Image",function(e,t){this.list=function(){var e=t.defer(),n=eng.getDataSource("Images");return n.fetch({},function(t){0==t.status?e.resolve(t.data):e.reject("Server error")}),e.promise}}),angular.module("service.report",[]).service("Report",function(e,t){this.byId=function(e){var n=t.defer(),r=eng.getDataSource("Report");return r.fetchObjById(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise},this.bySearchId=function(e){var n=t.defer(),r=eng.getDataSource("Report");return r.fetchObj({search:e},function(e){0==e.status?e.data[0]?n.resolve(e.data[0]):n.reject("No data"):n.reject("Server error")}),n.promise},this.update=function(e){var n=t.defer(),r=eng.getDataSource("Report");return r.updateObj(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise},this.save=function(e){var n=t.defer(),r=eng.getDataSource("Report");return r.addObj(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise}}),angular.module("service.role",[]).service("Role",function(e,t){this.byId=function(e){var n=t.defer(),r=eng.getDataSource("Role");return e||(e=""),r.fetchObjById(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise}}),angular.module("service.search",[]).service("Search",function(e,t){this.validate=function(e){var n=t.defer(),r=eng.getDataSource("Search");return r.validateObj(e,function(e){e&&0==e.status?n.resolve(e.data):n.reject(e.errors)}),n.promise},this.byId=function(e){var n=t.defer(),r=eng.getDataSource("Search");return r.fetchObjById(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise},this.list=function(){var e=t.defer(),n=eng.getDataSource("Search");return n.fetch({},function(t){t&&0==t.status?e.resolve(t.data):e.reject("Server error")}),e.promise},this.add=function(e){var n=t.defer(),r=eng.getDataSource("Search");return r.addObj(e,function(e){e&&0==e.status?n.resolve(e):-2==e.status?n.reject(e.msgError):n.reject("Server error")}),n.promise},this.update=function(e){var n=t.defer(),r=eng.getDataSource("Search");return r.updateObj(e,function(e){e?n.resolve(e):n.reject("No data")}),n.promise}}),angular.module("service.user",[]).service("User",function(e,t){this.getUser=function(){var e=t.defer();return eng.getUser(function(t){t?e.resolve(t):e.reject("Server error")}),e.promise}});